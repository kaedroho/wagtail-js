var Wagtail=function(){"use strict";function t(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var e=function(){function t(t){this.wagtail=t,this.filters={},this.searchQuery=null}return Object.defineProperty(t.prototype,"endpointUrl",{get:function(){return this.wagtail.baseUrl},enumerable:!0,configurable:!0}),t.prototype.fetch=function(t,e){var n=this;void 0===t&&(t=0),void 0===e&&(e=20);var r={offset:t,limit:e},o=Object.keys(r).reduce(function(t,e){return t.push(e+"="+encodeURIComponent(r[e])),t},[]).join("&");return new Promise(function(t,e){fetch(n.endpointUrl+"?"+o).then(function(e){e.json().then(function(e){t({totalCount:e.meta.total_count,items:e.items||e.pages||e.images||e.documents})})})})},t.prototype.fetchCount=function(){var t=this;return new Promise(function(e,n){t.fetch(0,0).then(function(t){e(t.totalCount)})})},t.prototype.fetchFirst=function(){var t=this;return new Promise(function(e,n){t.fetch(0,1).then(function(t){e(t.items[0])})})},t.prototype.fetchNth=function(t){var e=this;return new Promise(function(n,r){e.fetch(t,1).then(function(t){n(t.items[0])})})},t.prototype.clone=function(){var e=new t(this.wagtail);return e.filters=this.filters,e.searchQuery=this.searchQuery,e},t.prototype.filter=function(t){var e=this.clone();return e.filters=Object.assign({},this.filters,t),e},t.prototype.search=function(t){var e=this.clone();return e.searchQuery=t,e},t}(),n=function(e){function n(){e.apply(this,arguments)}return t(n,e),Object.defineProperty(n.prototype,"endpointUrl",{get:function(){return this.wagtail.baseUrl+"/pages/"},enumerable:!0,configurable:!0}),n}(e),r=function(e){function n(){e.apply(this,arguments)}return t(n,e),Object.defineProperty(n.prototype,"endpointUrl",{get:function(){return this.wagtail.baseUrl+"/images/"},enumerable:!0,configurable:!0}),n}(e),o=function(e){function n(){e.apply(this,arguments)}return t(n,e),Object.defineProperty(n.prototype,"endpointUrl",{get:function(){return this.wagtail.baseUrl+"/documents/"},enumerable:!0,configurable:!0}),n}(e),i=function(){function t(t){this.baseUrl=t}return Object.defineProperty(t.prototype,"pages",{get:function(){return new n(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"images",{get:function(){return new r(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"documents",{get:function(){return new o(this)},enumerable:!0,configurable:!0}),t}();return i}();